language: perl
perl:
- 5.18
- 5.16
- 5.14
- 5.12
- 5.10
- 5.8

# Performance optimizations (see https://github.com/campadrenalin/jemplate/issues/6)
sudo: false
cache:
  directories:
  - $HOME/perl5
  - $HOME/.cpanm

install:
- git clone --depth=1 --branch=master
  git://github.com/ingydotnet/test-base-pm ../testml-pm
- cpanm --quiet --notest
  File::Find::Rule
  Template
  Spiffy
  Devel::Cover::Report::Coveralls

script:
- PERL5OPT=-MDevel::Cover=-coverage,statement,branch,condition,path,subroutine
  PERL5LIB=../testml-pm/lib
  prove -lv t/
- cover

after_success:
- cover -report coveralls
